<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title></title>
    <script>
        /**
         * @version 1.0
         * @return {Object}
         */
//        var getXHR = function () {
//            if (window.XMLHttpRequest) {
//                getXHR = function () {
//                    return new XMLHttpRequest();
//                };
//                return new XMLHttpRequest();
//            }
//            getXHR = function () {
//                return new ActiveXObject('Microsoft.XMLHTTP');
//            };
//            return new ActiveXObject('Microsoft.XMLHTTP');
//        };
//        console.log('执行getXHR之前：',getXHR);
//        console.log(getXHR());
//        console.log('执行getXHR之后：',getXHR);

        var getXHROfV2 = (function () {
            if (window.XMLHttpRequest) {
                return function () {
                    return new XMLHttpRequest();
                }
            }
            return function () {
                return new ActiveXObject('Microsoft.XMLHTTP');
            }
        })();

        var xhr = getXHROfV2();
        xhr.open('get', 'data.json', true, 'zhangyatao', 'pwd');
        xhr.setRequestHeader('zhanyatao', '123');
        xhr.overrideMimeType('text/plain');
        xhr.onreadystatechange = function () {
            if (xhr.readyState === 4 && xhr.status === 200) {
                console.log('http request:', xhr.responseText);
                console.log('all response headers:', xhr.getAllResponseHeaders());
                console.log('get content-type header:', xhr.getResponseHeader('content-type'));
            }
        };
        xhr.send();
//        xhr.abort();

    </script>
</head>
<body>

</body>
</html>